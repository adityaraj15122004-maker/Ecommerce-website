<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MyKart - Cart</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>

    <!-- Navbar -->
    <div id="navbar"></div>

    <div class="cart-container">
        <h2>Your Shopping Cart ðŸ›’</h2>

        <div id="cart-items"></div>

        <div class="cart-summary">
            <h3 id="total-price">Total: â‚¹0</h3>
            <button id="checkout-btn">Proceed to Checkout</button>
        </div>
    </div>

    <!-- Footer -->
    <div id="footer"></div>

    <script type="module">

        import { loadNavbar } from "../js/components/navbar.js";
        import { loadFooter } from "../js/components/footer.js";

        document.getElementById("navbar").innerHTML = loadNavbar();
        document.getElementById("footer").innerHTML = loadFooter();

        let cart = JSON.parse(localStorage.getItem("cart")) || [];

        const cartItemsContainer = document.getElementById("cart-items");
        const totalPriceElement = document.getElementById("total-price");

        function displayCart() {
            cartItemsContainer.innerHTML = "";
            let total = 0;

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = "<p>Your cart is empty.</p>";
                totalPriceElement.innerText = "Total: â‚¹0";
                return;
            }

            cart.forEach((product, index) => {
                total += product.price;

                cartItemsContainer.innerHTML += `
                    <div class="cart-item">
                        <img src="${product.image}" width="80">
                        <div>
                            <h4>${product.name}</h4>
                            <p>â‚¹${product.price}</p>
                            <button onclick="removeItem(${index})">Remove</button>
                        </div>
                    </div>
                `;
            });

            totalPriceElement.innerText = "Total: â‚¹" + total;
        }

        window.removeItem = function(index) {
            cart.splice(index, 1);
            localStorage.setItem("cart", JSON.stringify(cart));
            displayCart();
        }

        displayCart();

    </script>

</body>
</html>
